<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>test reactivity</title>
</head>

<body>
  <article id="app"></article>
</body>
<script type="module">
  import { reactive, effect } from "./reactivity.js"
  const obj = { name: 'jk', age: 11, flag: true, addrss: { n: 1 } }
  const state = reactive(obj)

  const app = document.querySelector('#app')

  // let runner = effect(() => {
  //   app.innerHTML = state.flag ? state.name : state.age
  // }, {
  //   scheduler: () => {
  //     console.log('-----');
  //     runner() // 重新走effect回调

  //   }
  // })

  // 回调地狱
  // effect(() => {
  //   app.innerHTML = state.name
  //   state.name = Math.random()
  //   console.log('---');

  // })


  effect(() => {
    app.innerHTML = state.addrss.n

  })




  setTimeout(() => {
    state.addrss.n = 602
  }, 1000)
</script>

</html>